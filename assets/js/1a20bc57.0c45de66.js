"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[114],{7344:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>d,default:()=>h,frontMatter:()=>r,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"cli","title":"Command Line Interface (CLI)","description":"This page outlines how to use the switchmap-ng command line interface","source":"@site/docs/cli.md","sourceDirName":".","slug":"/cli","permalink":"/docs/cli","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/cli.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"title":"Command Line Interface (CLI)","sidebar_label":"CLI","sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"Configuration","permalink":"/docs/configuration"},"next":{"title":"Operation","permalink":"/docs/operation"}}');var a=s(4848),i=s(8453);const r={title:"Command Line Interface (CLI)",sidebar_label:"CLI",sidebar_position:4},d="The CLI",o={},l=[{value:"Viewing <code>switchmap-ng</code> status",id:"viewing-switchmap-ng-status",level:2},{value:"Poller status",id:"poller-status",level:3},{value:"API server status",id:"api-server-status",level:3},{value:"Ingester status",id:"ingester-status",level:3},{value:"Dashboard status",id:"dashboard-status",level:3},{value:"Daemon Management",id:"daemon-management",level:2},{value:"Poller Management",id:"poller-management",level:3},{value:"API Server Management",id:"api-server-management",level:3},{value:"Ingester Management",id:"ingester-management",level:3},{value:"Dashboard Management",id:"dashboard-management",level:3},{value:"Validating Device Polling",id:"validating-device-polling",level:2},{value:"Viewing <code>switchmap-ng</code> logs",id:"viewing-switchmap-ng-logs",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"the-cli",children:"The CLI"})}),"\n",(0,a.jsxs)(n.p,{children:["This page outlines how to use the ",(0,a.jsx)(n.code,{children:"switchmap-ng"})," command line interface\n(CLI)"]}),"\n",(0,a.jsxs)(n.h2,{id:"viewing-switchmap-ng-status",children:["Viewing ",(0,a.jsx)(n.code,{children:"switchmap-ng"})," status"]}),"\n",(0,a.jsxs)(n.p,{children:["There are a few important ",(0,a.jsx)(n.code,{children:"switchmap-ng"})," daemons."]}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Dashboard"})," Displays device data on web pages"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"poller:"})," Gets data from devices"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"server:"})," An API server that interacts with a backend database. It\naccepts data from the poller and stores it in a cache. It also\nprovides data to the dashboard."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"ingester:"})," Updates the database with data from the cache."]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"You can get the status of each daemon using the following CLI commands:"}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"NOTE:"})," Remember before running any of these commands to first\nactivate ",(0,a.jsx)(n.code,{children:"venv"})]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"$ source venv/bin/activate\n"})}),"\n",(0,a.jsx)(n.h3,{id:"poller-status",children:"Poller status"}),"\n",(0,a.jsx)(n.p,{children:"You can get the status of the poller using this command:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"(venv) $ bin/systemd/switchmap_poller --status\n"})}),"\n",(0,a.jsx)(n.h3,{id:"api-server-status",children:"API server status"}),"\n",(0,a.jsx)(n.p,{children:"You can get the status of the API server using this command:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"(venv) $ bin/systemd/switchmap_server --status\n"})}),"\n",(0,a.jsx)(n.h3,{id:"ingester-status",children:"Ingester status"}),"\n",(0,a.jsx)(n.p,{children:"You can get the status of the ingester using this command:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"(venv) $ bin/systemd/switchmap_ingester --status\n"})}),"\n",(0,a.jsx)(n.h3,{id:"dashboard-status",children:"Dashboard status"}),"\n",(0,a.jsx)(n.p,{children:"You can get the status of the dashboard using this command:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"(venv) $ bin/systemd/switchmap_dashboard --status\n"})}),"\n",(0,a.jsx)(n.h2,{id:"daemon-management",children:"Daemon Management"}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Note:"})," You will need to do a restart whenever you modify a\nconfiguration parameter."]}),"\n",(0,a.jsx)(n.h3,{id:"poller-management",children:"Poller Management"}),"\n",(0,a.jsxs)(n.p,{children:["The poller can be started, stopped and restarted using the following\ncommands. Use the ",(0,a.jsx)(n.code,{children:"--force"})," option only if the daemon may be hung."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"(venv) $ bin/systemd/switchmap_poller --start\n\n(venv) $ bin/systemd/switchmap_poller --stop\n(venv) $ bin/systemd/switchmap_poller --stop --force\n\n(venv) $ bin/systemd/switchmap_poller --restart\n(venv) $ bin/systemd/switchmap_poller --restart --force\n"})}),"\n",(0,a.jsx)(n.h3,{id:"api-server-management",children:"API Server Management"}),"\n",(0,a.jsxs)(n.p,{children:["The server can be started, stopped and restarted using the following\ncommands. Use the ",(0,a.jsx)(n.code,{children:"--force"})," option only if the daemon may be hung."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"(venv) $ bin/systemd/switchmap_server --start\n\n(venv) $ bin/systemd/switchmap_server --stop\n(venv) $ bin/systemd/switchmap_server --stop --force\n\n(venv) $ bin/systemd/switchmap_server --restart\n(venv) $ bin/systemd/switchmap_server --restart --force\n"})}),"\n",(0,a.jsx)(n.h3,{id:"ingester-management",children:"Ingester Management"}),"\n",(0,a.jsxs)(n.p,{children:["The ingester can be started, stopped and restarted using the following\ncommands. Use the ",(0,a.jsx)(n.code,{children:"--force"})," option only if the daemon may be hung."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"(venv) $ bin/systemd/switchmap_ingester --start\n\n(venv) $ bin/systemd/switchmap_ingester --stop\n(venv) $ bin/systemd/switchmap_ingester --stop --force\n\n(venv) $ bin/systemd/switchmap_ingester --restart\n(venv) $ bin/systemd/switchmap_ingester --restart --force\n"})}),"\n",(0,a.jsx)(n.h3,{id:"dashboard-management",children:"Dashboard Management"}),"\n",(0,a.jsxs)(n.p,{children:["The dashboard can be started, stopped and restarted using the following\ncommands. Use the ",(0,a.jsx)(n.code,{children:"--force"})," option only if the daemon may be hung."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"(venv) $ bin/systemd/switchmap_dashboard --start\n\n(venv) $ bin/systemd/switchmap_dashboard --stop\n(venv) $ bin/systemd/switchmap_dashboard --stop --force\n\n(venv) $ bin/systemd/switchmap_dashboard --restart\n(venv) $ bin/systemd/switchmap_dashboard --restart --force\n"})}),"\n",(0,a.jsx)(n.h2,{id:"validating-device-polling",children:"Validating Device Polling"}),"\n",(0,a.jsxs)(n.p,{children:["You may want to verify that the poller can access the hosts in the\nconfiguration. This can be done using the ",(0,a.jsx)(n.code,{children:"switchmap_poller_test.py"}),"\ncommand."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"(venv) $ bin/tools/switchmap_poller_test.py --hostname HOSTNAME\n"})}),"\n",(0,a.jsxs)(n.h2,{id:"viewing-switchmap-ng-logs",children:["Viewing ",(0,a.jsx)(n.code,{children:"switchmap-ng"})," logs"]}),"\n",(0,a.jsxs)(n.p,{children:["When troubleshooting it is a good practice to view the ",(0,a.jsx)(n.code,{children:"switchmap-ng"}),"\nlog files."]}),"\n",(0,a.jsxs)(n.p,{children:["These can be found in the directory configured with the ",(0,a.jsx)(n.code,{children:"log_directory"}),"\nin the configuration. The default is in the ",(0,a.jsx)(n.code,{children:"logs/"})," directory."]}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"switchmap.log"}),": The general log file"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"switchmap-server.log"}),": The log file used by the API server"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"switchmap-poller.log"}),": The log file used by the poller"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"switchmap-ingester.log"}),": The log file used by the ingester"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"switchmap-dashboard.log"}),": The log file used by the dashboard"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>d});var t=s(6540);const a={},i=t.createContext(a);function r(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);